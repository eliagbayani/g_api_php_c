<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
      
        <style>
            #map-canvas { width:500px; height:400px; }
            .layer-wizard-search-label { font-family: sans-serif };
        </style>
<script type="text/javascript" src="http://maps.google.com/maps/api/js"></script> <!-- ?sensor=false -->
<script type="text/javascript">
var map;
var layer_0;
function initialize() {
    map = new google.maps.Map(document.getElementById('map-canvas'), {
    center: new google.maps.LatLng(33.83253,-118.4745),
    zoom: 3,
    mapTypeId: google.maps.MapTypeId.ROADMAP
    });
    layer_0 = new google.maps.FusionTablesLayer({
        query: {select: "'location'", from: "1TspfLoWk5Vee6PHP78g09vwYtmNoeMIBgvt6Keiq"},
        map: map,
        heatmap: { enabled: false }
    });
      
    // put_list();
      
    google.maps.event.addDomListener(document.getElementById('heatmap'), 'click', function() {
        var heatmap = document.getElementById('heatmap');
        layer_0.setOptions({
        heatmap: {enabled: heatmap.checked}
        });
    });
    
    document.getElementById('heatmap').checked = false; //intial state
}

function changeMap_0() {
    var heatmap = document.getElementById('heatmap');
    var heatmap_label = document.getElementById('heatmap_label');
      
    var whereClause;
    var searchString = document.getElementById('search-string_0').value.replace(/'/g, "\\'");
    if (searchString != '--Select--') {
        whereClause = "'publisher' = '" + searchString + "'";
        heatmap.checked = false;
        layer_0.setOptions({heatmap: {enabled: false}});
        
        heatmap.disabled = true;
        heatmap_label.style['color'] = 'gray';
    }
    else
    {
        heatmap.disabled = false;
        heatmap_label.style['color'] = 'black';
    }
    layer_0.setOptions({
        query: {select: "'location'",
                from: "1TspfLoWk5Vee6PHP78g09vwYtmNoeMIBgvt6Keiq",
                where: whereClause}
    });
}
    google.maps.event.addDomListener(window, 'load', initialize);
</script>
  
  <!--
  <script src="data/1048643.json"></script>
  <script src="speedtest.js"></script>
  <script type="text/javascript">
    google.maps.event.addDomListener(window, 'load', initialize);
  </script>
  -->
  
  </head>
  <body>
      
    <div id="map-canvas"></div>

    <!--
    <div id="panel">
        <div>Georeference records: <span id="total_markers"></span></div>
        <div id="markerlist">eli</div>
    </div>
    -->
    
    <div style="margin-top: 10px;">
      <label class="layer-wizard-search-label">
        sciname
        <select id="search-string_0" onchange="changeMap_0(this.value);">
          <option value="--Select--">--Select--</option>
          <option value="American Museum of Natural History (AMNH)">American Museum of Natural History (AMNH)</option>
          <option value="Avian Knowledge Network (CLO)">Avian Knowledge Network (CLO)</option>
          <option value="Bird Studies Canada (BSC; Bird Studies Canada - Etudes d'Oiseaux Canada)">Bird Studies Canada (BSC; Bird Studies Canada - Etudes d'Oiseaux Canada)</option>
          <option value="California Academy of Sciences (CAS)">California Academy of Sciences (CAS)</option>
          <option value="Canadian Biodiversity Information Facility (BCPM)">Canadian Biodiversity Information Facility (BCPM)</option>
          <option value="Canadian Biodiversity Information Facility (PMAE)">Canadian Biodiversity Information Facility (PMAE)</option>
          <option value="Canadian Museum of Nature (CMN)">Canadian Museum of Nature (CMN)</option>
          <option value="Cheadle Center for Biodiversity and Ecological Restoration (CCBER)">Cheadle Center for Biodiversity and Ecological Restoration (CCBER)</option>
          <option value="Comisión nacional para el conocimiento y uso de la biodiversidad (NA)">Comisión nacional para el conocimiento y uso de la biodiversidad (NA)</option>
          <option value="Comisión nacional para el conocimiento y uso de la biodiversidad (ND)">Comisión nacional para el conocimiento y uso de la biodiversidad (ND)</option>
          <option value="Comisión nacional para el conocimiento y uso de la biodiversidad (No proporcionado)">Comisión nacional para el conocimiento y uso de la biodiversidad (No proporcionado)</option>
          <option value="Cornell Lab of Ornithology (CLO)">Cornell Lab of Ornithology (CLO)</option>
          <option value="Cornell University Museum of Vertebrates (CUMV)">Cornell University Museum of Vertebrates (CUMV)</option>
          <option value="Delaware Museum of Natural History (DMNH)">Delaware Museum of Natural History (DMNH)</option>
          <option value="Denver Museum of Nature & Science (DMNS)">Denver Museum of Nature & Science (DMNS)</option>
          <option value="Diveboard (Diveboard)">Diveboard (Diveboard)</option>
          <option value="European Molecular Biology Laboratory (EMBL)">European Molecular Biology Laboratory (EMBL)</option>
          <option value="Facultad de Ciencias, UNAM (Facultad de Ciencias UNAM)">Facultad de Ciencias, UNAM (Facultad de Ciencias UNAM)</option>
          <option value="James R. Slater Museum of Natural History (PSM)">James R. Slater Museum of Natural History (PSM)</option>
          <option value="Marine Science Institute, UCSB (PBDB)">Marine Science Institute, UCSB (PBDB)</option>
          <option value="Museum of Biological Diversity, The Ohio State University (Ohio State University - Bird Division, Columbus, OH (OSUM))">Museum of Biological Diversity, The Ohio State University (Ohio State University - Bird Division, Columbus, OH (OSUM))</option>
          <option value="Museum of Comparative Zoology, Harvard University (MCZ)">Museum of Comparative Zoology, Harvard University (MCZ)</option>
          <option value="Museum of Southwestern Biology (MSB)">Museum of Southwestern Biology (MSB)</option>
          <option value="Museum of Vertebrate Zoology (MVZ)">Museum of Vertebrate Zoology (MVZ)</option>
          <option value="Natural History Museum of Los Angeles County (LACM)">Natural History Museum of Los Angeles County (LACM)</option>
          <option value="New York State Museum (NYSM) (NYSM)">New York State Museum (NYSM) (NYSM)</option>
          <option value="Ocean Biogeographic Information System (OBIS-SEAMAP)">Ocean Biogeographic Information System (OBIS-SEAMAP)</option>
          <option value="Royal Belgian Institute of Natural Sciences (Royal Belgian Institute of natural Sciences)">Royal Belgian Institute of Natural Sciences (Royal Belgian Institute of natural Sciences)</option>
          <option value="Royal Ontario Museum (ROM)">Royal Ontario Museum (ROM)</option>
          <option value="Royal Ontario Museum (Royal Ontario Museum: ROM)">Royal Ontario Museum (Royal Ontario Museum: ROM)</option>
          <option value="Sam Noble Oklahoma Museum of Natural History (OMNH)">Sam Noble Oklahoma Museum of Natural History (OMNH)</option>
          <option value="San Diego Natural History Museum (SDNHM)">San Diego Natural History Museum (SDNHM)</option>
          <option value="Santa Barbara Museum of Natural History (SBMNH)">Santa Barbara Museum of Natural History (SBMNH)</option>
          <option value="UCLA-Dickey Collection (UCLA-Dickey) (UCLA)">UCLA-Dickey Collection (UCLA-Dickey) (UCLA)</option>
          <option value="UNIBIO, IBUNAM (IBUNAM)">UNIBIO, IBUNAM (IBUNAM)</option>
          <option value="University of Alaska Museum of the North (UAM)">University of Alaska Museum of the North (UAM)</option>
          <option value="University of British Columbia (UBCBBM)">University of British Columbia (UBCBBM)</option>
          <option value="University of Kansas Biodiversity Institute (KU)">University of Kansas Biodiversity Institute (KU)</option>
          <option value="University of Michigan Museum of Zoology (UMMZ)">University of Michigan Museum of Zoology (UMMZ)</option>
          <option value="University of Washington Burke Museum (UWBM)">University of Washington Burke Museum (UWBM)</option>
          <option value="Western Foundation of Vertebrate Zoology (WFVZ)">Western Foundation of Vertebrate Zoology (WFVZ)</option>
          <option value="Yale University Peabody Museum (YPM)">Yale University Peabody Museum (YPM)</option>
          <option value="iNaturalist.org (iNaturalist)">iNaturalist.org (iNaturalist)</option>
          <option value="naturgucker.de (naturgucker)">naturgucker.de (naturgucker)</option>
        </select>
      </label> 
    </div>
    
    <div>
          <label><div id="heatmap_label"><input id="heatmap" type="checkbox" unchecked /> Enable heatmap</div></label>
    </div>
  </body>
</html>
